- создать новый проект в Google Cloud Platform, например postgres2020-<yyyymmdd>, где yyyymmdd год, месяц и
день вашего рождения (имя проекта должно быть уникально на уровне GCP)
- дать возможность доступа к этому проекту пользователю postgres202010@gmail.com с ролью Project Editor
- далее создать инстанс виртуальной машины Compute Engine с дефолтными параметрами
- добавить свой ssh ключ в GCE metadata
- зайти удаленным ssh (первая сессия), не забывайте про ssh-add
- поставить PostgreSQL
- зайти вторым ssh (вторая сессия)
- запустить везде psql из под пользователя postgres
- выключить auto commit
- сделать в первой сессии новую таблицу и наполнить ее данными
 create table persons(id serial, first_name text, second_name text);
 insert into persons(first_name, second_name) values('ivan', 'ivanov');
 insert into persons(first_name, second_name) values('petr', 'petrov');
 commit;
- посмотреть текущий уровень изоляции: show transaction isolation level
- начать новую транзакцию в обоих сессиях с дефолтным (не меняя) уровнем изоляции
- в первой сессии добавить новую запись
 insert into persons(first_name, second_name) values('sergey', 'sergeev');
- сделать select * from persons во второй сессии
- видите ли вы новую запись и если да то почему?

- Ответ: **Нет, не увижу. Так как по дефолту транзакции в постгрессе read committed. И если бы я увидел, бы новую запись, то это был бы dirty read.**

- завершить первую транзакцию - commit;
- сделать select * from persons во второй сессии
- видите ли вы новую запись и если да то почему?
- Ответ: **Да, я увидел запись. Так как транзакции с добавления была завершенна. Но получается мы получили phatom read, так сделали 2 одинаковые query, но получили разный результат.**
- завершите транзакцию во второй сессии
- начать новые но уже repeatable read транзакции - set transaction isolation level repeatable read;
- в первой сессии добавить новую запись
 insert into persons(first_name, second_name) values('sveta', 'svetova');
- сделать select * from persons во второй сессии\
- видите ли вы новую запись и если да то почему?
- Ответ: **Тоже самое, потому что транзакция не за commit.**
- завершить первую транзакцию - commit;
- сделать select * from persons во второй сессии
- видите ли вы новую запись и если да то почему?
- Ответ: **Нет, не увидим. Мы поменяли уровень изоляции и теперь постгрес делает snapshot до начала транзакции и не видет изменения проведенный во время транзакции. Так как мы начали транзакции во 2 окне до транзакции в 1 окне. Мы не видим данные. repetable-read исключает phatom-read в postgres**
- завершить вторую транзакцию
- сделать select * from persons во второй сессии
- видите ли вы новую запись и если да то почему?
- Ответ: **Да, мы увидели записи. Так как мы завершили предыдущую транзакцию и создали новую , которая сделала новый snapshot с данными, которые были до нее.**

